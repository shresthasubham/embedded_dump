ORG 0000H

MOV 20H, #03FH
MOV 21H, #006H
MOV 22H, #05BH
MOV 23H, #04FH
MOV 24H, #066H
MOV 25H, #06DH
MOV 26H, #07DH
MOV 27H, #007H
MOV 28H, #07FH
MOV 29H, #06FH

MOV A, #0FFH
INCREASING:
INC A
LCALL DISPLAY_NUMBER
CJNE A, #014H, INCREASING

DECREASING:
DEC A
LCALL DISPLAY_NUMBER
JNZ DECREASING
JMP INCREASING


DISPLAY_NUMBER:
MOV R3, A
MOV R1, #30H
LCALL EXTRACT_DIGITS
MOV A, R4
MOV R5, A

MOV R7, #0FFH
INNER:
MOV R1, #30H
MOV R2, #08H

NEXT_DIGIT:
MOV R0, #20H

MOV A, @R1
ADD A, R0
MOV R0, A
INC R1

MOV P2, #0
MOV P0, @R0
MOV P2, R2

LCALL DELAY

MOV A, R2
RR A
MOV R2, A

DJNZ R4, NEXT_DIGIT
MOV A, R5
MOV R4, A

DJNZ R7, INNER

MOV A, R3
RET


EXTRACT_DIGITS:
MOV R4, #0H

EXTRACT_NEXT_DIGIT:
MOV B, #0AH
DIV AB

MOV @R1, B
INC R1
INC R4

JNZ EXTRACT_NEXT_DIGIT
RET


DELAY:
MOV R6, #0FFH
AGAIN:
DJNZ R6, AGAIN
RET

END